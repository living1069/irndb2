{% load staticfiles %}

{% if targets %}


<div class="panel panel-default">
  <div class="panel-heading">
    <b>Targets ({{targets|length}})</b>
    <div style="float: right"><a href="#" role='button' onclick="enrich({list: ['{{ enrichr|safe }}'], popup: true, description: 'Targets of {{ name }}'});"><button type="button" class="btn btn-default btn-xs">Run enrichment analysis (Enrichr)</button></a></div>
  </div>
  <div class="panel-body">
    {% comment %}
    <a href="{% url 'irndb2:browse_url_name' %}?type={{ entity_type }}&pw=1&pwt={{ pwt }}&dnl=1">
      <p class="text-right"><button type="button" class="btn btn-sm btn-default"><i class="fa fa-floppy-o"></i> Export to csv</button></p>
    </a>
    {% endcomment %}
    <div class="dataTable_wrapper">
    <table id="sebio1" class="table table-condensed">
      <thead>
      <tr>
          <th><img title="Target" src="{% static 'irndb2/images/target-small.png' %}" style="vertical-align: middle;" alt="" / >&nbsp;Symbol</th>
          <th><img title="Target" src="{% static 'irndb2/images/target-small.png' %}" style="vertical-align: middle;" alt="" / >&nbsp;Name</th>
          <th title="Immune-relevance inferred from"><img src="{% static 'irndb2/images/target-small.png' %}" style="vertical-align: middle;" alt="" / ></th>
          <th title="Immune-relevance source">Immune source</th>
          <th title="Source of the interaction">Target Source</th>
          <th title="Link to PubMed"><img src="{% static 'irndb2/images/pubmed-small.png' %}" style="vertical-align: middle;" alt="" / ></th>
      </tr>
      </thead>      
      <tbody>
      {% for t in targets %}
      <tr>
        <td><a class="t1" href="{% url 'irndb2:target_url_name' t.1 %}" title="IRNdb target view">{{ t.1 }}</a></td>
        <td><a class="t1" href="http://www.ncbi.nlm.nih.gov/gene/{{ t.0 }}" title="Link to NCBI gene">{{ t.2 }}</a></td>
        <td>
         {% if t.3 == 1 %}
          mouse
         {% else %}
          human
         {% endif %}
        </td>
        <td>

          <table id="res">
               <tbody>
                 {% for isource in t.4 %}
                 <tr>
                    <td>{{ isource }}</td>
                 </tr>
                 {% endfor %}
               </tbody>
           </table>

         </td>
         {% if entity_type == 'lncrna' %}
         <td>{{ t.6 }}</td>
         {% elif entity_type == 'pirna' %}
         <td>piRBase</td>
         {% endif %}
         <td>
          <a class="g" title="Link to PubMed" href="http://www.ncbi.nlm.nih.gov/pubmed/{{ t.5 }}"><img src="{% static 'irndb2/images/pubmed-small.png' %}" style="vertical-align: middle;" alt="" / ></a>
        </td>
      </tr>
      {% endfor %}
      </tbody>
    </table> 

    <script>
    $(document).ready( function () {
      var table = $('#sebio1').DataTable( {
         "columns": [
           {"width":"120px"},
           null, 
           {"width":"50px", "className": "text-center"},
           {"width":"120px", "bSortable": false},
           {"width":"120px", "className": "text-center"},
           {"width":"20px", "className": "text-center", "bSortable": false},
          ],
          "order": [[ 0, "asc" ]],
          "deferRender": true,
          responsive: true,
          lengthChange: false,
          "pageLength": 15,
          buttons: [ 'copy', 'excel' ]
        });
        table.buttons().container()
                     .appendTo( '#sebio1_wrapper .col-sm-6:eq(0)' );
       } );
    </script>
   </div>
  </div>
</div>
    
{% else %}
    <p>No targets available.</p>
{% endif %}

{% comment %}
    Existed: {{ existed }}
{% endcomment %}
