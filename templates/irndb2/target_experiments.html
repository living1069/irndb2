{% load staticfiles %}

<div class="panel panel-default">
  <div class="panel-heading">
    <b>Experiments with down-regulated target gene ({{ exp_dn|length }})</b>
  </div>
  <div class="panel-body">
    {% if exp_dn %}
    <div class="dataTable_wrapper">
      <table id="sebioE2" class="table table-condensed">
        <thead>
          <tr>
            <th><img title="Link to MSigDB source" src="{% static 'irndb2/images/experiment-small.png' %}" style="vertical-align: middle;" alt="" / > Description</th>
            <th><img title="Link to PubMed" src="{% static 'irndb2/images/experiment-small.png' %}" style="vertical-align: middle;" alt="" / > Authors</th>
            <th>Organism</th>
            <th><img title="Link to experimental data" src="{% static 'irndb2/images/geo-small.png' %}" style="vertical-align: middle;" alt="GEO" / ></th>
          </tr>
        </thead>
        
        <tbody>
          {% for tuple in exp_dn %}
          <tr>
            <td>
              <a class="g" title="Link to MSigDB source" href="{{ tuple.2 }}">{{ tuple.6 }}</a>
            </td>
            <td>
              {% if tuple.4 %} 
              <a class="g" title="Link to PubMed" href="http://www.ncbi.nlm.nih.gov/pubmed/{{ tuple.4 }}">{{ tuple.5 }}</a>
              {% endif %}
            </td>
            <td>
              {% if tuple.3 == 'Mus musculus' %}
              mouse
              {% elif tuple.3 == 'Homo sapiens'%}
              human
              {% else %}
              {{ tuple.3 }}
              {% endif %}
            </td>
            <td>
              {% if tuple.0 %}
              <a class="g" title="Gene expression omnibus link" href="http://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc={{ tuple.0 }}">{{ tuple.0 }}</a>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table> 
      <script>
        $(document).ready( function () {
        var tableE2 = $('#sebioE2').DataTable( {
          "columns": [null, {"width": "160px"}, {"width": "100px", "className": "text-left"}, {"width": "80px", "className": "text-left",   "bSortable": false} ],
          "order": [[ 0, "asc" ]],
          "deferRender": true,
          responsive: true,
          lengthChange: false,
          "pageLength": 5,
          buttons: [ 'copy', 'excel' ]
        });
        tableE2.buttons().container()
          .appendTo( '#sebioE2_wrapper .col-sm-6:eq(0)' );
        } );
      </script>
    </div>
    {% else %}
    <p>No experiments available.</p>
    {% endif %}
    
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    <b>Experiments with up-regulated target gene ({{ exp_up|length }})</b>
  </div>
  <div class="panel-body">
    {% if exp_up %}
    <div class="dataTable_wrapper">
      <table id="sebioE1" class="table table-condensed">
        <thead>
          <tr>
            <th><img src="{% static 'irndb2/images/experiment-small.png' %}" style="vertical-align: middle;" alt="" / > Description</th>
            <th><img src="{% static 'irndb2/images/experiment-small.png' %}" style="vertical-align: middle;" alt="" / > Authors</th>
            <th>Organism</th>
            <th><img src="{% static 'irndb2/images/geo-small.png' %}" style="vertical-align: middle;" alt="" / ></th>
          </tr>
        </thead>
        <tbody class="dt-nowrap">
          {% for tuple in exp_up %}
          <tr>
            <td>
              <a class="g" title="Link to MSigDB source" href="{{ tuple.2 }}">{{ tuple.6 }}</a>
            </td>
            <td>
              {% if tuple.4 %} 
              <a class="g" title="Link to PubMed" href="http://www.ncbi.nlm.nih.gov/pubmed/{{ tuple.4 }}">{{ tuple.5 }}</a>
              {% endif %}
            </td>
            <td>
              {% if tuple.3 == 'Mus musculus' %}
              mouse
              {% elif tuple.3 == 'Homo sapiens'%}
              human
              {% else %}
              {{ tuple.3 }}
              {% endif %}
            </td>
            <td>
              {% if tuple.0 %}
              <a class="g" title="Gene expression omnibus link" href="http://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc={{ tuple.0 }}">{{ tuple.0 }}</a>
              {% endif %}
            </td>
          </tr>
      {% endfor %}
        </tbody>
      </table> 
      <script>
        $(document).ready( function () {
        var tableE1 = $('#sebioE1').DataTable( {
          "columns": [null, {"width": "160px"}, {"width": "100px", "className": "text-left"}, {"width": "80px", "className": "text-left",   "bSortable": false} ],
          "order": [[ 0, "asc" ]],
          "deferRender": true,
          responsive: true,
          lengthChange: false,
          "pageLength": 5,
          buttons: [ 'copy', 'excel' ]
        });
        tableE1.buttons().container()
          .appendTo( '#sebioE1_wrapper .col-sm-6:eq(0)' );
        } );
      </script>
    </div>
    {% else %}
      <p>No experiments available.</p>
    {% endif %}
  </div>
</div>

